---
title: è°ƒè¯•æ™ºèƒ½ä½“
sidebarTitle: è°ƒè¯•æ™ºèƒ½ä½“
description: å­¦ä¹ å¦‚ä½•è°ƒè¯•å’Œæ’é™¤æ™ºèƒ½ä½“æ•…éšœã€‚
---

Agno æä¾›äº†å¼ºå¤§çš„è°ƒè¯•åŠŸèƒ½ï¼Œå¸®åŠ©æ‚¨ç†è§£å’Œä¼˜åŒ–æ™ºèƒ½ä½“çš„è¡Œä¸ºã€‚

## è°ƒè¯•æ¨¡å¼

è°ƒè¯•æ¨¡å¼æä¾›ä»¥ä¸‹åŠŸèƒ½ï¼š

- ğŸ“Š **å®æ—¶ç›‘æ§**ï¼šæŸ¥çœ‹æ™ºèƒ½ä½“çš„å®æ—¶æ‰§è¡Œè¿‡ç¨‹
- ğŸ” **è¯¦ç»†æ—¥å¿—**ï¼šè·å–è¯¦ç»†çš„æ‰§è¡Œæ—¥å¿—å’Œé”™è¯¯ä¿¡æ¯
- ğŸ¯ **æ­¥éª¤è·Ÿè¸ª**ï¼šè·Ÿè¸ªæ™ºèƒ½ä½“çš„æ¯ä¸ªæ‰§è¡Œæ­¥éª¤
- ğŸ“ˆ **æ€§èƒ½åˆ†æ**ï¼šåˆ†ææ™ºèƒ½ä½“çš„æ€§èƒ½æŒ‡æ ‡
- ğŸ› ï¸ **äº¤äº’å¼è°ƒè¯•**ï¼šåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æš‚åœå’Œæ£€æŸ¥çŠ¶æ€

### å¯ç”¨è°ƒè¯•æ¨¡å¼

1. **è®¾ç½®ç¯å¢ƒå˜é‡**ï¼š

```bash
export AGNO_DEBUG=true
```

2. **åœ¨ä»£ç ä¸­å¯ç”¨**ï¼š

```python
from agno.agent import Agent
from agno.models.anthropic import Claude
from agno.tools.hackernews import HackerNewsTools

agent = Agent(
    model=Claude(id="claude-sonnet-4-5"),
    tools=[HackerNewsTools()],
    instructions="å°±è¯¥ä¸»é¢˜å†™ä¸€ä»½æŠ¥å‘Šã€‚åªè¾“å‡ºæŠ¥å‘Šã€‚",
    markdown=True,
    debug=True  # å¯ç”¨è°ƒè¯•æ¨¡å¼
)

response = agent.run("è¶‹åŠ¿åˆåˆ›å…¬å¸å’Œäº§å“ã€‚")
```

3. **ä½¿ç”¨è°ƒè¯•è£…é¥°å™¨**ï¼š

```python
from agno.agent import Agent
from agno.models.anthropic import Claude
from agno.tools.hackernews import HackerNewsTools
from agno.utils.debug import debug_agent

@debug_agent
def debug_run():
    agent = Agent(
        model=Claude(id="claude-sonnet-4-5"),
        tools=[HackerNewsTools()],
        instructions="å°±è¯¥ä¸»é¢˜å†™ä¸€ä»½æŠ¥å‘Šã€‚åªè¾“å‡ºæŠ¥å‘Šã€‚",
        markdown=True,
    )
    
    response = agent.run("è¶‹åŠ¿åˆåˆ›å…¬å¸å’Œäº§å“ã€‚")
    return response

result = debug_run()
```

## äº¤äº’å¼ CLI

Agno æä¾›äº†äº¤äº’å¼å‘½ä»¤è¡Œç•Œé¢ï¼Œè®©æ‚¨èƒ½å¤Ÿå®æ—¶è°ƒè¯•æ™ºèƒ½ä½“ï¼š

```bash
agno debug --agent-id your_agent_id
```

### CLI åŠŸèƒ½

- **å®æ—¶æ—¥å¿—æŸ¥çœ‹**ï¼šæŸ¥çœ‹æ™ºèƒ½ä½“çš„å®æ—¶æ—¥å¿—è¾“å‡º
- **æ–­ç‚¹è®¾ç½®**ï¼šåœ¨ç‰¹å®šç‚¹æš‚åœæ‰§è¡Œ
- **å˜é‡æ£€æŸ¥**ï¼šæ£€æŸ¥æ‰§è¡Œè¿‡ç¨‹ä¸­çš„å˜é‡å€¼
- **çŠ¶æ€ç›‘æ§**ï¼šç›‘æ§æ™ºèƒ½ä½“çš„å†…éƒ¨çŠ¶æ€
- **é”™è¯¯è¿½è¸ª**ï¼šè¿½è¸ªå’Œåˆ†æé”™è¯¯

### ä½¿ç”¨ç¤ºä¾‹

```bash
# å¯åŠ¨è°ƒè¯•ä¼šè¯
agno debug --agent-id web_agent

# è®¾ç½®æ–­ç‚¹
agno debug --breakpoint tool_call --agent-id web_agent

# æŸ¥çœ‹å®æ—¶æ—¥å¿—
agno debug --logs --follow --agent-id web_agent

# æ£€æŸ¥ç‰¹å®šè¿è¡Œ
agno debug --run-id run_123 --agent-id web_agent
```

<Tip>
è°ƒè¯•æ¨¡å¼ä¼šäº§ç”Ÿå¤§é‡æ—¥å¿—è¾“å‡ºï¼Œå»ºè®®ä»…åœ¨å¼€å‘ç¯å¢ƒä¸­ä½¿ç”¨ã€‚
</Tip>

## å¸¸è§è°ƒè¯•åœºæ™¯

### 1. å·¥å…·è°ƒç”¨å¤±è´¥

å½“æ™ºèƒ½ä½“çš„å·¥å…·è°ƒç”¨å¤±è´¥æ—¶ï¼Œæ£€æŸ¥ä»¥ä¸‹å†…å®¹ï¼š

```python
from agno.agent import Agent
from agno.models.anthropic import Claude
from agno.tools.hackernews import HackerNewsTools

agent = Agent(
    model=Claude(id="claude-sonnet-4-5"),
    tools=[HackerNewsTools()],
    instructions="å°±è¯¥ä¸»é¢˜å†™ä¸€ä»½æŠ¥å‘Šã€‚åªè¾“å‡ºæŠ¥å‘Šã€‚",
    markdown=True,
    debug=True,
    # å¯ç”¨è¯¦ç»†é”™è¯¯ä¿¡æ¯
    show_tool_errors=True,
)

response = agent.run("è¶‹åŠ¿åˆåˆ›å…¬å¸å’Œäº§å“ã€‚")
```

### 2. æ€§èƒ½é—®é¢˜

åˆ†ææ™ºèƒ½ä½“çš„æ€§èƒ½ç“¶é¢ˆï¼š

```python
import time
from agno.agent import Agent
from agno.models.anthropic import Claude
from agno.tools.hackernews import HackerNewsTools

# æ€§èƒ½ç›‘æ§è£…é¥°å™¨
def monitor_performance(func):
    def wrapper(*args, **kwargs):
        start_time = time.time()
        result = func(*args, **kwargs)
        end_time = time.time()
        print(f"æ‰§è¡Œæ—¶é—´: {end_time - start_time:.2f} ç§’")
        return result
    return wrapper

@monitor_performance
def run_agent():
    agent = Agent(
        model=Claude(id="claude-sonnet-4-5"),
        tools=[HackerNewsTools()],
        instructions="å°±è¯¥ä¸»é¢˜å†™ä¸€ä»½æŠ¥å‘Šã€‚åªè¾“å‡ºæŠ¥å‘Šã€‚",
        markdown=True,
        debug=True,
    )
    
    response = agent.run("è¶‹åŠ¿åˆåˆ›å…¬å¸å’Œäº§å“ã€‚")
    return response

result = run_agent()
```

### 3. è®°å¿†é—®é¢˜

è°ƒè¯•æ™ºèƒ½ä½“çš„è®°å¿†åŠŸèƒ½ï¼š

```python
from agno.agent import Agent
from agno.models.anthropic import Claude
from agno.tools.hackernews import HackerNewsTools
from agno.memory.agent.sqlite import SqliteAgentMemory

agent = Agent(
    model=Claude(id="claude-sonnet-4-5"),
    tools=[HackerNewsTools()],
    instructions="å°±è¯¥ä¸»é¢˜å†™ä¸€ä»½æŠ¥å‘Šã€‚åªè¾“å‡ºæŠ¥å‘Šã€‚",
    markdown=True,
    debug=True,
    # å¯ç”¨è®°å¿†è°ƒè¯•
    memory=SqliteAgentMemory(table_name="agent_memory"),
    show_memory_usage=True,
)

response = agent.run("è¶‹åŠ¿åˆåˆ›å…¬å¸å’Œäº§å“ã€‚")

# æ£€æŸ¥è®°å¿†ä½¿ç”¨æƒ…å†µ
print(f"è®°å¿†ä½¿ç”¨æƒ…å†µ: {agent.memory.get_usage_stats()}")
```

### 4. ä¸Šä¸‹æ–‡é—®é¢˜

è°ƒè¯•ä¸Šä¸‹æ–‡æ„å»ºè¿‡ç¨‹ï¼š

```python
from agno.agent import Agent
from agno.models.anthropic import Claude
from agno.tools.hackernews import HackerNewsTools

agent = Agent(
    model=Claude(id="claude-sonnet-4-5"),
    tools=[HackerNewsTools()],
    instructions="å°±è¯¥ä¸»é¢˜å†™ä¸€ä»½æŠ¥å‘Šã€‚åªè¾“å‡ºæŠ¥å‘Šã€‚",
    markdown=True,
    debug=True,
    # å¯ç”¨ä¸Šä¸‹æ–‡è°ƒè¯•
    show_context=True,
    context_debug_level="verbose",
)

response = agent.run("è¶‹åŠ¿åˆåˆ›å…¬å¸å’Œäº§å“ã€‚")

# æŸ¥çœ‹ä¸Šä¸‹æ–‡æ„å»ºè¿‡ç¨‹
print(f"ä¸Šä¸‹æ–‡è¯¦æƒ…: {agent.get_context_debug()}")
```

## é«˜çº§è°ƒè¯•æŠ€å·§

### 1. è‡ªå®šä¹‰è°ƒè¯•å¤„ç†å™¨

```python
from agno.agent import Agent
from agno.models.anthropic import Claude
from agno.tools.hackernews import HackerNewsTools
from agno.utils.debug import DebugHandler

class CustomDebugHandler(DebugHandler):
    def handle_tool_call(self, tool_call):
        print(f"ğŸ”§ å·¥å…·è°ƒç”¨: {tool_call.name}")
        print(f"ğŸ“ å‚æ•°: {tool_call.arguments}")
    
    def handle_tool_response(self, tool_response):
        print(f"ğŸ“‹ å·¥å…·å“åº”: {tool_response.name}")
        print(f"ğŸ“Š ç»“æœ: {tool_response.result}")
    
    def handle_model_response(self, response):
        print(f"ğŸ’¬ æ¨¡å‹å“åº”: {response.content[:100]}...")

agent = Agent(
    model=Claude(id="claude-sonnet-4-5"),
    tools=[HackerNewsTools()],
    instructions="å°±è¯¥ä¸»é¢˜å†™ä¸€ä»½æŠ¥å‘Šã€‚åªè¾“å‡ºæŠ¥å‘Šã€‚",
    markdown=True,
    debug=True,
    debug_handler=CustomDebugHandler(),
)

response = agent.run("è¶‹åŠ¿åˆåˆ›å…¬å¸å’Œäº§å“ã€‚")
```

### 2. æ¡ä»¶è°ƒè¯•

```python
from agno.agent import Agent
from agno.models.anthropic import Claude
from agno.tools.hackernews import HackerNewsTools

def should_debug(input_text):
    # ä»…å¯¹ç‰¹å®šè¾“å…¥å¯ç”¨è°ƒè¯•
    debug_keywords = ["debug", "error", "test"]
    return any(keyword in input_text.lower() for keyword in debug_keywords)

agent = Agent(
    model=Claude(id="claude-sonnet-4-5"),
    tools=[HackerNewsTools()],
    instructions="å°±è¯¥ä¸»é¢˜å†™ä¸€ä»½æŠ¥å‘Šã€‚åªè¾“å‡ºæŠ¥å‘Šã€‚",
    markdown=True,
    debug=should_debug("è¶‹åŠ¿åˆåˆ›å…¬å¸å’Œäº§å“ã€‚"),
)

response = agent.run("è¶‹åŠ¿åˆåˆ›å…¬å¸å’Œäº§å“ã€‚")
```

### 3. è°ƒè¯•æ•°æ®å¯¼å‡º

```python
import json
from agno.agent import Agent
from agno.models.anthropic import Claude
from agno.tools.hackernews import HackerNewsTools

agent = Agent(
    model=Claude(id="claude-sonnet-4-5"),
    tools=[HackerNewsTools()],
    instructions="å°±è¯¥ä¸»é¢˜å†™ä¸€ä»½æŠ¥å‘Šã€‚åªè¾“å‡ºæŠ¥å‘Šã€‚",
    markdown=True,
    debug=True,
)

response = agent.run("è¶‹åŠ¿åˆåˆ›å…¬å¸å’Œäº§å“ã€‚")

# å¯¼å‡ºè°ƒè¯•æ•°æ®
debug_data = {
    "run_id": response.run_id,
    "tools_called": response.tools,
    "metrics": response.metrics,
    "context": agent.get_context_debug(),
}

with open("debug_output.json", "w", encoding="utf-8") as f:
    json.dump(debug_data, f, indent=2, ensure_ascii=False)
```

## æ•…éšœæ’é™¤æŒ‡å—

### å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

#### 1. æ™ºèƒ½ä½“æ— å“åº”

**ç—‡çŠ¶**ï¼šæ™ºèƒ½ä½“ä¸äº§ç”Ÿä»»ä½•è¾“å‡º
**å¯èƒ½åŸå› **ï¼š
- æ¨¡å‹ API å¯†é’¥æ— æ•ˆ
- ç½‘ç»œè¿æ¥é—®é¢˜
- æŒ‡ä»¤ä¸æ¸…æ™°

**è§£å†³æ–¹æ¡ˆ**ï¼š
```python
# æ£€æŸ¥ API è¿æ¥
from agno.models.anthropic import Claude

try:
    model = Claude(id="claude-sonnet-4-5")
    response = model.generate("æµ‹è¯•è¿æ¥")
    print("API è¿æ¥æ­£å¸¸")
except Exception as e:
    print(f"API è¿æ¥å¤±è´¥: {e}")
```

#### 2. å·¥å…·è°ƒç”¨å¤±è´¥

**ç—‡çŠ¶**ï¼šå·¥å…·è°ƒç”¨è¿”å›é”™è¯¯
**å¯èƒ½åŸå› **ï¼š
- å·¥å…·å‚æ•°ä¸æ­£ç¡®
- å·¥å…·æœåŠ¡ä¸å¯ç”¨
- æƒé™é—®é¢˜

**è§£å†³æ–¹æ¡ˆ**ï¼š
```python
# æµ‹è¯•å·¥å…·
from agno.tools.hackernews import HackerNewsTools

try:
    tools = HackerNewsTools()
    result = tools.top_stories(limit=1)
    print("å·¥å…·å·¥ä½œæ­£å¸¸")
except Exception as e:
    print(f"å·¥å…·æµ‹è¯•å¤±è´¥: {e}")
```

#### 3. è®°å¿†åŠŸèƒ½å¼‚å¸¸

**ç—‡çŠ¶**ï¼šæ™ºèƒ½ä½“ä¸è®°ä½ä¹‹å‰çš„äº¤äº’
**å¯èƒ½åŸå› **ï¼š
- æ•°æ®åº“è¿æ¥é—®é¢˜
- è®°å¿†é…ç½®é”™è¯¯
- å­˜å‚¨è·¯å¾„é—®é¢˜

**è§£å†³æ–¹æ¡ˆ**ï¼š
```python
# æµ‹è¯•è®°å¿†è¿æ¥
from agno.memory.agent.sqlite import SqliteAgentMemory

try:
    memory = SqliteAgentMemory(table_name="test_memory")
    memory.add("æµ‹è¯•è®°å¿†", "test_user")
    print("è®°å¿†åŠŸèƒ½æ­£å¸¸")
except Exception as e:
    print(f"è®°å¿†åŠŸèƒ½å¤±è´¥: {e}")
```

## å¼€å‘è€…èµ„æº

- æŸ¥çœ‹[æ™ºèƒ½ä½“æ¶æ„](/reference/agents/agent)
- æŸ¥çœ‹[è°ƒè¯•å·¥å…·](/reference/utils/debug)
- æŸ¥çœ‹[å®è·µæŒ‡å—](https://github.com/agno-agi/agno/tree/main/cookbook/03_agents/README.md)