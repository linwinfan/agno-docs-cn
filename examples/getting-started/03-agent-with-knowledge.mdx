---
title: 带知识的智能体
description: 学习如何创建带有知识的智能体
mode: wide
---

本示例展示如何创建一个结合精选食谱数据库知识和网络搜索能力的 AI 烹饪助手。该智能体使用正宗泰国食谱的 PDF 知识库，并在需要时通过网络搜索补充信息。

可尝试的示例提示：
- "如何制作正宗的泰式炒河粉？"
- "红咖喱和绿咖喱有什么区别？"
- "你能解释什么是高良姜以及可能的替代品吗？"
- "告诉我冬阴功汤的历史"
- "泰国厨房的基本食材有哪些？"
- "如何制作泰式罗勒鸡（泰式炒鸡）？"

## 代码

```python agent_with_knowledge.py
from textwrap import dedent

from agno.agent import Agent
from agno.knowledge.embedder.openai import OpenAIEmbedder
from agno.knowledge.knowledge import Knowledge
from agno.models.openai import OpenAIChat
from agno.tools.duckduckgo import DuckDuckGoTools
from agno.vectordb.lancedb import LanceDb, SearchType

knowledge = Knowledge(
    vector_db=LanceDb(
        uri="tmp/lancedb",
        table_name="recipe_knowledge",
        search_type=SearchType.hybrid,
        embedder=OpenAIEmbedder(id="text-embedding-3-small"),
    ),
)

knowledge.add_content(
    url="https://agno-public.s3.amazonaws.com/recipes/ThaiRecipes.pdf",
)

# 创建一个具有泰国食谱知识的食谱专家智能体
agent = Agent(
    model=OpenAIChat(id="gpt-5-mini"),
    instructions=dedent("""\
        你是一个充满热情和知识渊博的泰国菜专家！🧑‍🍳
        把自己想象成一个温暖、鼓励的烹饪导师、泰国美食史学家和文化大使的结合体。

        回答问题时请遵循以下步骤：
        1. 如果用户询问泰国菜，总是在知识库中搜索正宗的泰国食谱和烹饪信息
        2. 如果知识库中的信息不完整，或者用户提出的问题更适合网络搜索，则通过网络搜索填补空白
        3. 如果你在知识库中找到信息，无需进行网络搜索
        4. 为了保证真实性，始终优先考虑知识库信息而不是网络结果
        5. 如需要，通过网络搜索补充：
            - 现代改编或食材替代品
            - 文化背景和历史背景
            - 额外的烹饪技巧和故障排除

        沟通风格：
        1. 每次回应以相关的烹饪表情符号开始
        2. 清晰地组织你的回应：
            - 简短的介绍或背景
            - 主要内容（食谱、解释或历史）
            - 专业技巧或文化见解
            - 鼓励性的结论
        3. 对于食谱，包括：
            - 食材清单及可能的替代品
            - 清晰、编号的烹饪步骤
            - 成功技巧和常见陷阱
        4. 使用友好、鼓励的语言

        特色功能：
        - 解释不熟悉的泰国食材并建议替代品
        - 分享相关的文化背景和传统
        - 提供适应不同饮食需求的食谱调整技巧
        - 包括上菜建议和配菜

        每次回应以振奋人心的结束语结尾，如：
        - '愉快烹饪！ขอให้อร่อย（享用您的美餐）！'
        - '愿您的泰国烹饪之旅带来快乐！'
        - '享用您的自制泰国盛宴！'

        记住：
        - 始终通过知识库验证食谱的真实性
        - 明确指出信息来自网络来源时
        - 对所有技能水平的家庭厨师保持鼓励和支持\
    """),
    knowledge=knowledge,
    tools=[DuckDuckGoTools()],
    markdown=True,
)

agent.print_response(
    "如何制作椰奶鸡肉高良姜汤", stream=True
)
agent.print_response("泰国咖喱的历史是什么？", stream=True)
agent.print_response"制作泰式炒河粉需要什么食材？", stream=True)

# 更多可尝试的示例提示：
"""
通过这些查询探索泰国菜：
1. "泰国烹饪中的基本香料和草药有哪些？"
2. "你能解释不同类型的泰国咖喱酱吗？"
3. "如何制作芒果糯米饭甜点？"
4. "烹饪泰国茉莉香米的正确方法是什么？"
5. "告诉我泰国菜的地区差异"
"""
```

## 使用方法

<Steps>
  <Snippet file="create-venv-step.mdx" />

  <Step title="安装库">
    ```bash
    pip install openai lancedb tantivy pypdf ddgs agno
    ```
  </Step>

  <Step title="运行智能体">
    ```bash
    python agent_with_knowledge.py
    ```
  </Step>

</Steps>